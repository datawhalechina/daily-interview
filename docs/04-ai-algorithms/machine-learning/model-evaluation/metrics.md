

# è¯„æµ‹æŒ‡æ ‡é¢è¯•é¢?

metricä¸»è¦ç”¨æ¥è¯„æµ‹æœºå™¨å­¦ä¹ æ¨¡åž‹çš„å¥½åç¨‹åº?ä¸åŒçš„ä»»åŠ¡åº”è¯¥é€‰æ‹©ä¸åŒçš„è¯„ä»·æŒ‡æ ?åˆ†ç±»,å›žå½’å’ŒæŽ’åºé—®é¢˜åº”è¯¥é€‰æ‹©ä¸åŒçš„è¯„ä»·å‡½æ•? ä¸åŒçš„é—®é¢˜åº”è¯¥ä¸åŒå¯¹å¾?å³ä½¿éƒ½æ˜¯åˆ†ç±»é—®é¢˜ä¹Ÿä¸åº”è¯¥å”¯è¯„ä»·å‡½æ•°è®º,ä¸åŒé—®é¢˜ä¸åŒåˆ†æž.

## å›žå½’(Regression)
### å¹³å‡ç»å¯¹è¯¯å·®(MAE)

å¹³å‡ç»å¯¹è¯¯å·®MAEï¼ˆMean Absolute Errorï¼‰åˆè¢«ç§°ä¸?L1èŒƒæ•°æŸå¤±ã€?
$$
MAE=\frac{1}{n}\sum_{i=1}^{n}|y_i-\hat{y}_i| \tag{1}
$$
MAEè™½èƒ½è¾ƒå¥½è¡¡é‡å›žå½’æ¨¡åž‹çš„å¥½åï¼Œä½†æ˜¯ç»å¯¹å€¼çš„å­˜åœ¨å¯¼è‡´å‡½æ•°ä¸å…‰æ»‘ï¼Œåœ¨æŸäº›ç‚¹ä¸Šä¸èƒ½æ±‚å¯¼ï¼Œå¯ä»¥è€ƒè™‘å°†ç»å¯¹å€¼æ”¹ä¸ºæ®‹å·®çš„å¹³æ–¹ï¼Œè¿™å°±æ˜¯å‡æ–¹è¯¯å·®ã€?

### å‡æ–¹è¯¯å·®(MSE)

å‡æ–¹è¯¯å·®MSEï¼ˆMean Squared Errorï¼‰åˆè¢«ç§°ä¸?L2èŒƒæ•°æŸå¤± ã€?
$$
MSE=\frac{1}{n}\sum_{i=1}^{n}(y_i-\hat{y}_i)^2 \tag{2}
$$
ç”±äºŽMSEä¸Žæˆ‘ä»¬çš„ç›®æ ‡å˜é‡çš„é‡çº²ä¸ä¸€è‡´ï¼Œä¸ºäº†ä¿è¯é‡çº²ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹MSEè¿›è¡Œå¼€æ–?ã€?

### å‡æ–¹æ ¹è¯¯å·?RMSE)
$$
RMSE=\sqrt{\frac{1}{n}\sum_{i=1}^{n}(y_i-\hat{y}_i)^2} \tag{3}
$$



### R2_score

$$
R2_score =1-\frac{\sum^n_{i}\left(y_{i}-\hat{y}\right)^{2} / n}{\sum^n_{i}\left(y_{i}-\bar{y}\right)^{2} / n}=1-\frac{M S E}{\operatorname{Var}}	\tag{4}
$$


$R2{_score}$åˆç§°å†³å®šç³»æ•°ï¼Œè¡¨ç¤ºååº”å› å˜é‡çš„å…¨éƒ¨å˜å¼‚èƒ½é€šè¿‡æ•°å­¦æ¨¡åž‹è¢«è‡ªå˜é‡è§£é‡Šçš„æ¯”ä¾? $R2\_{score}$è¶Šå¤§ï¼Œæ¨¡åž‹å‡†ç¡®çŽ‡è¶Šå¥½ã€?

$y$è¡¨ç¤ºå®žé™…å€?$\hat{y}$è¡¨ç¤ºé¢„æµ‹å€?$\bar{y}$è¡¨ç¤ºå®žé™…å€¼çš„å‡å€?$n$è¡¨ç¤ºæ ·æœ¬æ•?$i$è¡¨ç¤ºç¬?i$ä¸ªæ ·æœ¬ã€?Var$è¡¨ç¤ºå®žé™…å€¼çš„æ–¹å·®ï¼Œä¹Ÿå°±æ˜¯å€¼çš„å˜å¼‚æƒ…å†µã€?

$MSE$è¡¨ç¤ºå‡æ–¹è¯¯å·®ï¼Œä¸ºæ®‹å·®å¹³æ–¹å’Œçš„å‡å€?è¯¥éƒ¨åˆ†ä¸èƒ½èƒ½è¢«æ•°å­¦æ¨¡åž‹è§£é‡Šçš„éƒ¨åˆ†,å±žäºŽä¸å¯è§£é‡Šæ€§å˜å¼‚ã€?

å› æ­¤ï¼?
$$
å¯è§£é‡Šæ€§å˜å¼‚å æ¯?= 1-\frac{ä¸å¯è§£é‡Šæ€§å˜å¼‚}{æ•´ä½“å˜å¼‚}= 1-\frac{M S E}{\operatorname{Var}} = R2\_score	\tag{5}
$$


## åˆ†ç±»(Classification)
### å‡†ç¡®çŽ‡å’Œé”™è¯¯çŽ?


$$
Acc(y,\hat{y})=\frac{1}{n}\sum_{i=1}^{n}y_i=\hat{y_i} \tag{6}
$$

$$
Error(y, \hat{y})=1-acc(y,\hat{y}) \tag{7}
$$
Accä¸ŽErrorå¹³ç­‰å¯¹å¾…æ¯ä¸ªç±»åˆ«ï¼Œå³æ¯ä¸€ä¸ªæ ·æœ¬åˆ¤å¯?(0) å’Œåˆ¤é”?(1) çš„ä»£ä»·éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½¿ç”¨Accä¸ŽErrorä½œä¸ºè¡¡é‡æŒ‡æ ‡æ—¶ï¼Œéœ€è¦è€ƒè™‘æ ·æœ¬ä¸å‡è¡¡é—®é¢˜ä»¥åŠå®žé™…ä¸šåŠ¡ä¸­å¥½æ ·æœ¬ä¸Žåæ ·æœ¬çš„é‡è¦ç¨‹åº¦ã€?

### æ··æ·†çŸ©é˜µ
å¯¹äºŽäºŒåˆ†ç±»é—®é¢?å¯å°†æ ·ä¾‹æ ¹æ®å…¶çœŸæ˜¯ç±»åˆ«ä¸Žå­¦ä¹ å™¨é¢„æµ‹ç±»åˆ«çš„ç»„åˆåˆ’åˆ†ä¸ºï¼š

```
çœŸæ­£ä¾?true positive, TP):é¢„æµ‹ä¸?1ï¼Œé¢„æµ‹æ­£ç¡®ï¼Œå³å®žé™?1
å‡æ­£ä¾?false positive, FP):é¢„æµ‹ä¸?1ï¼Œé¢„æµ‹é”™è¯¯ï¼Œå³å®žé™?0
çœŸåä¾?ture negative, TN):é¢„æµ‹ä¸?0ï¼Œé¢„æµ‹æ­£ç¡®ï¼Œå³å®žé™?0
å‡åä¾?false negative, FN):é¢„æµ‹ä¸?0ï¼Œé¢„æµ‹é”™è¯¯ï¼Œå³å®žé™?1
```

åˆ™æœ‰:TP+FP+TN+FN=æ ·ä¾‹æ€»æ•°. åˆ†ç±»ç»“æžœçš„æ··æ·†çŸ©é˜?confusion matrix)å¦‚ä¸‹:

![image-20210616223053609](/images/Metrics/image-20210616223053609.png)

###  ç²¾ç¡®çŽ‡ï¼ˆæŸ¥å‡†çŽ‡ï¼‰ Precision

Precision æ˜¯åˆ†ç±»å™¨é¢„æµ‹çš„æ­£æ ·æœ¬ä¸­é¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ï¼Œå–å€¼èŒƒå›´ä¸º[0,1]ï¼Œå–å€¼è¶Šå¤§ï¼Œæ¨¡åž‹é¢„æµ‹èƒ½åŠ›è¶Šå¥½ã€?
$$
P=\frac{TP}{TP+FP} \tag{8}
$$

### å¬å›žçŽ‡ï¼ˆæŸ¥å…¨çŽ‡ï¼‰Recall

Recall æ˜¯åˆ†ç±»å™¨æ‰€é¢„æµ‹æ­£ç¡®çš„æ­£æ ·æœ¬å æ‰€æœ‰æ­£æ ·æœ¬çš„æ¯”ä¾‹ï¼Œå–å€¼èŒƒå›´ä¸º[0,1]ï¼Œå–å€¼è¶Šå¤§ï¼Œæ¨¡åž‹é¢„æµ‹èƒ½åŠ›è¶Šå¥½ã€?
$$
R=\frac{TP}{TP+FN} \tag{9}
$$


### F1 Score

Precisionå’ŒRecall æ˜¯äº’ç›¸å½±å“çš„ï¼Œç†æƒ³æƒ…å†µä¸‹è‚¯å®šæ˜¯åšåˆ°ä¸¤è€…éƒ½é«˜ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹Precisioné«˜ã€Recall å°±ä½Žï¼?Recall é«˜ã€Precisionå°±ä½Žã€‚ä¸ºäº†å‡è¡¡ä¸¤ä¸ªæŒ‡æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨Precisionå’ŒRecallçš„åŠ æƒè°ƒå’Œå¹³å‡ï¼ˆweighted harmonic meanï¼‰æ¥è¡¡é‡ï¼Œå³F1 Score
$$
\frac{1}{F_1}=\frac{1}{2} \cdot (\frac{1}{P}+\frac{1}{R}) \tag{10}
$$

$$
F_1=\frac{2*P*R}{P+R}  \tag{11}
$$


### ROC         
ROCå…¨ç§°æ˜?å—è¯•è€…å·¥ä½œç‰¹å¾?(Receiver Operating Characteristic)æ›²çº¿. ROCæ›²çº¿ä¸?FPR ä¸?TPR ä¹‹é—´çš„å…³ç³»æ›²çº¿ï¼Œè¿™ä¸ªç»„åˆä»?FPR å¯?TPRï¼Œå³æ˜¯ä»¥ä»£ä»· (costs) å¯¹æ”¶ç›?(benefits)ï¼Œæ˜¾ç„¶æ”¶ç›Šè¶Šé«˜ï¼Œä»£ä»·è¶Šä½Žï¼Œæ¨¡åž‹çš„æ€§èƒ½å°±è¶Šå¥½ã€?å…¶ä¸­ROCæ›²çº¿çš„æ¨ªè½´æ˜¯"å‡æ­£ä¾‹çŽ‡"(False Positive Rate, **FPR**), çºµè½´æ˜?çœŸæ­£ä¾‹çŽ‡"(True Positive Rate, **TPR**), **æ³¨æ„è¿™é‡Œä¸æ˜¯ä¸Šæ–‡æé«˜çš„På’ŒR**. 

- y è½´ä¸ºçœŸé˜³æ€§çŽ‡ï¼ˆTPRï¼‰ï¼šåœ¨æ‰€æœ‰çš„æ­£æ ·æœ¬ä¸­ï¼Œåˆ†ç±»å™¨é¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ï¼ˆç­‰äºŽRecallï¼?

$$
TPR=\frac{TP}{TP+FN} \tag{12}
$$

- x è½´ä¸ºå‡é˜³æ€§çŽ‡ï¼ˆFPRï¼‰ï¼šåœ¨æ‰€æœ‰çš„è´Ÿæ ·æœ¬ä¸­ï¼?*åˆ†ç±»å™¨é¢„æµ‹é”™è¯¯çš„æ¯”ä¾‹**


$$
FPR=\frac{FP}{TN+FP} \tag{13}
$$


çŽ°å®žä½¿ç”¨ä¸?ä¸€èˆ¬ä½¿ç”¨æœ‰é™ä¸ªæµ‹è¯•æ ·ä¾‹ç»˜åˆ¶ROCæ›²çº¿,æ­¤æ—¶éœ€è¦æœ‰æœ‰é™ä¸?çœŸæ­£ä¾‹çŽ‡,å‡æ­£ä¾‹çŽ‡)åæ ‡å¯? ç»˜å›¾è¿‡ç¨‹å¦‚ä¸‹:
1. ç»™å®š$m^+$ä¸ªæ­£ä¾‹å’Œ$m^-$ä¸ªåä¾?æ ¹æ®å­¦ä¹ å™¨é¢„æµ‹ç»“æžœå¯¹æ ·ä¾‹è¿›è¡ŒæŽ’åº,ç„¶åŽå°†åˆ†ç±»é˜ˆå€¼è®¾ä¸ºæœ€å¤?æ­¤æ—¶çœŸæ­£ä¾‹çŽ‡å’Œå‡æ­£ä¾‹çŽ‡éƒ½ä¸?,åæ ‡åœ?0,0)å¤?æ ‡è®°ä¸€ä¸ªç‚¹.
2. å°†åˆ†ç±»é˜ˆå€¼ä¾æ¬¡è®¾ä¸ºæ¯ä¸ªæ ·æœ¬çš„é¢„æµ‹å€?å³ä¾æ¬¡å°†æ¯ä¸ªæ ·æœ¬åˆ’åˆ†ä¸ºæ­£ä¾?
3. å‡è®¾å‰ä¸€ä¸ªåæ ‡ç‚¹æ˜?x,y),è‹¥å½“å‰ä¸ºçœŸæ­£ä¾?åˆ™å¯¹åº”åæ ‡ä¸º$(x,y+\frac{1}{m^+})$, è‹¥æ˜¯å‡æ­£ä¾?åˆ™å¯¹åº”åæ ‡ä¸º$(x+\frac{1}{m^-}, y)$
4. çº¿æ®µè¿žæŽ¥ç›¸é‚»çš„ç‚¹.

ROCæ›²çº¿å¦‚ä¸‹å›?å…¶ä¸­å¯¹è§’çº¿å¯¹åº”äºŽ"éšæœºçŒœæµ‹"æ¨¡åž‹):

![image-20210616214012974](/images/Metrics/image-20210616214012974.png)

### AUC

å¯¹äºŽäºŒåˆ†ç±»é—®é¢˜ï¼Œé¢„æµ‹æ¨¡åž‹ä¼šå¯¹æ¯ä¸€ä¸ªæ ·æœ¬é¢„æµ‹ä¸€ä¸ªå¾—åˆ†sæˆ–è€…ä¸€ä¸ªæ¦‚çŽ‡pã€?ç„¶åŽï¼Œå¯ä»¥é€‰å–ä¸€ä¸ªé˜ˆå€¼tï¼Œè®©å¾—åˆ†s>tçš„æ ·æœ¬é¢„æµ‹ä¸ºæ­£ï¼Œè€Œå¾—åˆ†s<tçš„æ ·æœ¬é¢„æµ‹ä¸ºè´Ÿã€?è¿™æ ·ä¸€æ¥ï¼Œæ ¹æ®é¢„æµ‹çš„ç»“æžœå’Œå®žé™…çš„æ ‡ç­¾å¯ä»¥æŠŠæ ·æœ¬åˆ†ä¸º4ç±?åˆ™æœ‰æ··æ·†çŸ©é˜µï¼?

|          | å®žé™…ä¸ºæ­£ | å®žé™…ä¸ºè´Ÿ |
| -------- | -------- | -------- |
| é¢„æµ‹ä¸ºæ­£ | TP       | FP       |
| é¢„æµ‹ä¸ºè´Ÿ | FN       | TN       |

éšç€é˜ˆå€¼té€‰å–çš„ä¸åŒï¼Œè¿™å››ç±»æ ·æœ¬çš„æ¯”ä¾‹å„ä¸ç›¸åŒã€‚å®šä¹‰çœŸæ­£ä¾‹çŽ‡TPRå’Œå‡æ­£ä¾‹çŽ‡FPRä¸ºï¼š
$$
\begin{array}{l}
\mathrm{TPR}=\frac{\mathrm{TP}}{\mathrm{TP}+\mathrm{FN}} \\
\mathrm{FPR}=\frac{\mathrm{FP}}{\mathrm{FP}+\mathrm{TN}}
\end{array} \tag{14}
$$
éšç€é˜ˆå€¼tçš„å˜åŒ–ï¼ŒTPRå’ŒFPRåœ¨åæ ‡å›¾ä¸Šå½¢æˆä¸€æ¡æ›²çº¿ï¼Œè¿™æ¡æ›²çº¿å°±æ˜¯ROCæ›²çº¿ã€?æ˜¾ç„¶ï¼Œå¦‚æžœæ¨¡åž‹æ˜¯éšæœºçš„ï¼Œæ¨¡åž‹å¾—åˆ†å¯¹æ­£è´Ÿæ ·æœ¬æ²¡æœ‰åŒºåˆ†æ€§ï¼Œé‚£ä¹ˆå¾—åˆ†å¤§äºŽtçš„æ ·æœ¬ä¸­ï¼Œæ­£è´Ÿæ ·æœ¬æ¯”ä¾‹å’Œæ€»ä½“çš„æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹åº”è¯¥åŸºæœ¬ä¸€è‡´ã€?

å®žé™…çš„æ¨¡åž‹çš„ROCæ›²çº¿åˆ™æ˜¯ä¸€æ¡ä¸Šå‡¸çš„æ›²çº¿ï¼Œä»‹äºŽéšæœºå’Œç†æƒ³çš„ROCæ›²çº¿ä¹‹é—´ã€‚è€ŒROCæ›²çº¿ä¸‹çš„é¢ç§¯ï¼Œå³ä¸ºAUCï¼?

![image-20210713205533305](/images/metrics/image-20210713205533305.png)

è¿™é‡Œçš„xå’Œyåˆ†åˆ«å¯¹åº”TPRå’ŒFPRï¼Œä¹Ÿæ˜¯ROCæ›²çº¿çš„æ¨ªçºµåæ ‡ã€?
$$
\mathrm{AUC}=\int_{t=\infty}^{-\infty} y(t) d x(t) \tag{15}
$$


å‚è€ƒï¼šhttps://tracholar.github.io/machine-learning/2018/01/26/auc.html

### KS Kolmogorov-Smirnov

KSå€¼æ˜¯åœ¨æ¨¡åž‹ä¸­ç”¨äºŽ**åŒºåˆ†é¢„æµ‹æ­£è´Ÿæ ·æœ¬åˆ†éš”ç¨‹åº¦**çš„è¯„ä»·æŒ‡æ ‡ï¼Œä¸€èˆ¬åº”ç”¨äºŽé‡‘èžé£ŽæŽ§é¢†åŸŸã€‚ä¸ŽROCæ›²çº¿ç›¸ä¼¼ï¼ŒROCæ˜¯ä»¥FPRä½œä¸ºæ¨ªåæ ‡ï¼ŒTPRä½œä¸ºçºµåæ ‡ï¼Œé€šè¿‡æ”¹å˜ä¸åŒé˜ˆå€¼ï¼Œä»Žè€Œå¾—åˆ°ROCæ›²çº¿ã€‚ksæ›²çº¿ä¸ºTPR-FPRï¼Œksæ›²çº¿çš„æœ€å¤§å€¼é€šå¸¸ä¸ºkså€¼ã€‚å¯ä»¥ç†è§£TPRæ˜¯æ”¶ç›Šï¼ŒFPRæ˜¯ä»£ä»·ï¼Œkså€¼æ˜¯æ”¶ç›Šæœ€å¤§ã€‚å›¾ä¸­ç»¿è‰²çº¿æ˜¯TPRã€è“è‰²çº¿æ˜¯FPRã€?

![image-20210616214714505](/images/Metrics/image-20210616214714505.png)

KSçš„è®¡ç®—æ­¥éª¤å¦‚ä¸‹ï¼š

1. æŒ‰ç…§æ¨¡åž‹çš„ç»“æžœå¯¹æ¯ä¸ªæ ·æœ¬è¿›è¡Œæ‰“åˆ†
2. æ‰€æœ‰æ ·æœ¬æŒ‰ç…§è¯„åˆ†æŽ’åºï¼Œä»Žå°åˆ°å¤§åˆ†ä¸º10ç»„ï¼ˆæˆ?0ç»„ï¼‰
3. è®¡ç®—æ¯ä¸ªè¯„åˆ†åŒºé—´çš„å¥½åæ ·æœ¬æ•°ã€?
4. è®¡ç®—æ¯ä¸ªè¯„åˆ†åŒºé—´çš„ç´¯è®¡å¥½æ ·æœ¬æ•°å æ€»å¥½è´¦æˆ·æ•°æ¯”çŽ?good%)å’Œç´¯è®¡åæ ·æœ¬æ•°å æ€»åæ ·æœ¬æ•°æ¯”çŽ?bad%)ã€?
5. è®¡ç®—æ¯ä¸ªè¯„åˆ†åŒºé—´ç´¯è®¡åæ ·æœ¬å æ¯”ä¸Žç´¯è®¡å¥½æ ·æœ¬å æ¯”å·®çš„ç»å¯¹å€¼ï¼ˆç´¯è®¡bad%-ç´¯è®¡good%ï¼‰ï¼Œç„¶åŽå¯¹è¿™äº›ç»å¯¹å€¼å–æœ€å¤§å€¼å³å¾—æ­¤è¯„åˆ†æ¨¡åž‹çš„K-Så€¼ã€?

### CTRï¼ˆClick-Through-Rateï¼?

CTRå³ç‚¹å‡»é€šè¿‡çŽ?æ˜¯äº’è”ç½‘å¹¿å‘Šå¸¸ç”¨çš„æœ¯è¯?æŒ‡ç½‘ç»œå¹¿å‘Šï¼ˆå›¾ç‰‡å¹¿å‘Š/æ–‡å­—å¹¿å‘Š/å…³é”®è¯å¹¿å‘?æŽ’åå¹¿å‘Š/è§†é¢‘å¹¿å‘Šç­‰ï¼‰çš„ç‚¹å‡»åˆ°è¾¾çŽ‡,å³è¯¥å¹¿å‘Šçš„å®žé™…ç‚¹å‡»æ¬¡æ•°ï¼ˆä¸¥æ ¼çš„æ¥è¯?å¯ä»¥æ˜¯åˆ°è¾¾ç›®æ ‡é¡µé¢çš„æ•°é‡ï¼‰é™¤ä»¥å¹¿å‘Šçš„å±•çŽ°é‡?Show content).
$$
ctr=\frac{ç‚¹å‡»æ¬¡æ•°}{å±•ç¤ºé‡}ã€€\tag{16}
$$


### CVR    (Conversion Rate)

CVRå³è½¬åŒ–çŽ‡ã€‚æ˜¯ä¸€ä¸ªè¡¡é‡CPAå¹¿å‘Šæ•ˆæžœçš„æŒ‡æ ‡ï¼Œç®€è¨€ä¹‹å°±æ˜¯ç”¨æˆ·ç‚¹å‡»å¹¿å‘Šåˆ°æˆä¸ºä¸€ä¸ªæœ‰æ•ˆæ¿€æ´»æˆ–è€…æ³¨å†Œç”šè‡³ä»˜è´¹ç”¨æˆ·çš„è½¬åŒ–çŽ?
$$
cvr=\frac{ç‚¹å‡»é‡}{è½¬åŒ–é‡}ã€€\tag{17}
$$


## å‚è€?
1. å‘¨å¿—å?è¥¿ç“œä¹?
2. æŽèˆª ç»Ÿè®¡å­¦ä¹ æ–¹æ³•
3. https://baike.baidu.com/item/CVR/20215345
4. https://baike.baidu.com/item/CTR/10653699?fr=aladdin
5. https://www.cnblogs.com/shenxiaolin/p/9309749.html
