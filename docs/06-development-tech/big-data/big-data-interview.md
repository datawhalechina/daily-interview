# é¢è¯•é¢˜ç›®

## 1. ç›¸åŒURL
> **é¢˜ç›®**: ç»™å®šaã€bä¸¤ä¸ªæ–‡ä»¶ï¼Œå„å­˜æ”¾50äº¿ä¸ªurlï¼Œæ¯ä¸ªurlå„å 64å­—èŠ‚ï¼Œå†…å­˜é™åˆ¶æ˜¯4Gï¼Œè®©ä½ æ‰¾å‡ºaã€bæ–‡ä»¶å…±åŒçš„urlï¼?

> æ–¹æ¡ˆ1ï¼šä¼°è®¡æ¯ä¸ªæ–‡ä»¶çš„å¤§å°ä¸?0GÃ—64=320Gï¼Œè¿œè¿œå¤§äºå†…å­˜é™åˆ¶çš„4Gã€‚æ‰€ä»¥ä¸å¯èƒ½å°†å…¶å®Œå…¨åŠ è½½åˆ°å†…å­˜ä¸­å¤„ç†ã€‚è€ƒè™‘é‡‡å–åˆ†è€Œæ²»ä¹‹çš„æ–¹æ³•ã€?
> <img src="/images/big-data1.png">
> éå†æ–‡ä»¶aï¼Œå¯¹æ¯ä¸ªurlæ±‚å– hash(url)%1000[æ¯”å¦‚ASCIIç å€¼æ±‚å’Œ], ç„¶åæ ¹æ®æ‰€å–å¾—çš„å€¼å°†urlåˆ†åˆ«å­˜å‚¨åˆ?000ä¸ªå°æ–‡ä»¶(è®°ä¸ºa0, a1, â€?, a999)ä¸­ã€‚è¿™æ ·æ¯ä¸ªå°æ–‡ä»¶çš„å¤§çº¦ä¸º300Mã€?
> 
> éå†æ–‡ä»¶bï¼Œé‡‡å–å’Œaç›¸åŒçš„æ–¹å¼å°†urlåˆ†åˆ«å­˜å‚¨åˆ?000ä¸ªå°æ–‡ä»¶(è®°ä¸ºb0, b1, â€?, b999)ã€?
> 
> è¿™æ ·å¤„ç†åï¼Œæ‰€æœ‰å¯èƒ½ç›¸åŒçš„urléƒ½åœ¨å¯¹åº”çš„å°æ–‡ä»¶(a0 vs b0, a1 vs b1, â€?, a999 vs b999)ä¸­ï¼Œä¸å¯¹åº”çš„å°æ–‡ä»¶ä¸å¯èƒ½æœ‰ç›¸åŒçš„urlã€‚ç„¶åæˆ‘ä»¬åªè¦æ±‚å‡?000å¯¹å°æ–‡ä»¶ä¸­ç›¸åŒçš„urlå³å¯ã€?
> 
> æ±‚æ¯å¯¹å°æ–‡ä»¶ä¸­ç›¸åŒçš„urlæ—¶ï¼Œå¯ä»¥æŠŠå…¶ä¸­ä¸€ä¸ªå°æ–‡ä»¶çš„urlå­˜å‚¨åˆ°hash_setä¸­ã€‚ç„¶åéå†å¦ä¸€ä¸ªå°æ–‡ä»¶çš„æ¯ä¸ªurlï¼Œçœ‹å…¶æ˜¯å¦åœ¨åˆšæ‰æ„å»ºçš„hash_setä¸­ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°±æ˜¯å…±åŒçš„urlï¼Œå­˜åˆ°æ–‡ä»¶é‡Œé¢å°±å¯ä»¥äº†ã€?


> æ–¹æ¡ˆ2ï¼šå¦‚æœå…è®¸æœ‰ä¸€å®šçš„é”™è¯¯ç‡ï¼Œå¯ä»¥ä½¿ç”¨Bloom filterï¼?Gå†…å­˜å¤§æ¦‚å¯ä»¥è¡¨ç¤º340äº¿bitã€‚å°†å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ä¸­çš„urlä½¿ç”¨Bloom filteræ˜ å°„ä¸ºè¿™340äº¿bitï¼Œç„¶åæŒ¨ä¸ªè¯»å–å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„urlï¼Œæ£€æŸ¥æ˜¯å¦ä¸Bloom filterï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆè¯¥urlåº”è¯¥æ˜¯å…±åŒçš„urlï¼ˆæ³¨æ„ä¼šæœ‰ä¸€å®šçš„é”™è¯¯ç‡ï¼‰ã€?

## 2. Queryæ’åº
> **é¢˜ç›®**: æœ?0ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶1Gï¼Œæ¯ä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œå­˜æ”¾çš„éƒ½æ˜¯ç”¨æˆ·çš„queryï¼Œæ¯ä¸ªæ–‡ä»¶çš„queryéƒ½å¯èƒ½é‡å¤ã€‚è¦æ±‚ä½ æŒ‰ç…§queryçš„é¢‘åº¦æ’åºã€?
> 
> æ–¹æ¡ˆ1ï¼?      
> é¡ºåºè¯»å–10ä¸ªæ–‡ä»¶ï¼ŒæŒ‰ç…§hash(query)%10çš„ç»“æœå°†queryå†™å…¥åˆ°å¦å¤?0ä¸ªæ–‡ä»?r1,r2â€¦r10)ä¸­ã€‚è¿™æ ·æ–°ç”Ÿæˆçš„æ–‡ä»¶æ¯ä¸ªçš„å¤§å°å¤§çº¦ä¹?Gï¼ˆå‡è®¾hashå‡½æ•°æ˜¯éšæœºçš„ï¼‰ã€?
> 
> [2Gå·¦å³çš„æœºå™¨] å¯¹r1,r2â€¦r10ç”¨hash_map(query, query_count)æ¥ç»Ÿè®¡æ¯ä¸ªqueryå‡ºç°çš„æ¬¡æ•°ã€‚åˆ©ç”¨å¿«é€?å ?å½’å¹¶æ’åºæŒ‰ç…§å‡ºç°æ¬¡æ•°è¿›è¡Œæ’åºã€‚å°†æ’åºå¥½çš„queryå’Œå¯¹åº”çš„query_coutè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚è¿™æ ·å¾—åˆ°äº†10ä¸ªæ’å¥½åºçš„æ–‡ä»?r1,r2â€¦r10).
> 
> å¯?r1,r2â€¦r10)è¿?0ä¸ªæ–‡ä»¶å½’å¹¶æ’åº?å†…æ’åºå’Œå¤–æ’åºç»“å?
> <img src="/images/bigdata2.png"/>
> æ–¹æ¡ˆ2ï¼?  
> ä¸€èˆ¬queryçš„æ€»é‡æ˜¯æœ‰é™çš„ï¼Œåªæ˜¯é‡å¤çš„æ¬¡æ•°æ¯”è¾ƒå¤šè€Œå·²ï¼Œå¯èƒ½å¯¹äºæ‰€æœ‰çš„queryï¼Œä¸€æ¬¡æ€§å°±å¯ä»¥åŠ å…¥åˆ°å†…å­˜äº†ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨trieæ ?hash_mapç­‰ç›´æ¥æ¥ç»Ÿè®¡æ¯ä¸ªqueryå‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åæŒ‰å‡ºç°æ¬¡æ•°åšå¿«é€?å ?å½’å¹¶æ’åºå°±å¯ä»¥äº†ã€?
Â 
## 3. Top k å•è¯
**é¢˜ç›®**: æœ‰ä¸€ä¸?Gå¤§å°çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œé‡Œé¢æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªè¯ï¼Œè¯çš„å¤§å°ä¸è¶…è¿‡16å­—èŠ‚ï¼Œå†…å­˜é™åˆ¶å¤§å°æ˜¯1Mã€‚è¿”å›é¢‘æ•°æœ€é«˜çš„100ä¸ªè¯ã€?

> 1. é¡ºåºè¯»æ–‡ä»¶ï¼Œå¯¹æ¯ä¸ªè¯xï¼Œå–hash(x)%5000ï¼Œç„¶åæŒ‰ç…§è¯¥å€¼å­˜åˆ?000ä¸ªå°æ–‡ä»¶(x0, x1, â€?x4999)ä¸­ã€‚è¿™æ ·æ¯ä¸ªæ–‡ä»¶å¤§æ¦‚æ˜¯200kå·¦å³ï¼Œå¦‚æœæœ‰çš„æ–‡ä»¶è¶…è¿‡äº†1Må¤§å°ï¼Œè¿˜å¯ä»¥æŒ‰ç…§ç±»ä¼¼çš„æ–¹æ³•ç»§ç»­å¾€ä¸‹åˆ†ï¼Œç›´åˆ°åˆ†è§£å¾—åˆ°çš„å°æ–‡ä»¶çš„å¤§å°éƒ½ä¸è¶…è¿‡1Mã€?
> 2. å¯¹æ¯ä¸ªå°æ–‡ä»¶ï¼Œç»Ÿè®¡æ¯ä¸ªæ–‡ä»¶å‡ºç°çš„è¯åŠç›¸åº”çš„é¢‘ç‡ï¼ˆå¯ä»¥é‡‡ç”¨trieæ ?hash_mapç­‰ï¼‰ï¼Œå¹¶å–å‡ºç°é¢‘ç‡æœ€å¤§çš„100ä¸ªè¯ï¼ˆå¯ä»¥ç”¨å?00ä¸ªç»“ç‚¹çš„æœ€å°å †ï¼‰ï¼Œå¹¶æŠŠ100è¯åŠç›¸åº”çš„é¢‘ç‡å­˜å…¥æ–‡ä»¶ï¼Œè¿™æ ·åˆå¾—åˆ°äº†5000ä¸ªæ–‡ä»¶ã€?
> 3. ä¸‹ä¸€æ­¥å°±æ˜¯æŠŠè¿?000ä¸ªæ–‡ä»¶è¿›è¡Œå½’å¹¶ï¼ˆç±»ä¼¼ä¸å½’å¹¶æ’åºï¼‰çš„è¿‡ç¨‹äº†ã€?

## 4. IPç»Ÿè®¡Â 
> **é¢˜ç›®**: æµ·é‡æ—¥å¿—æ•°æ®ï¼Œæå–å‡ºæŸæ—¥è®¿é—®ç™¾åº¦æ¬¡æ•°æœ€å¤šçš„é‚£ä¸ªIPã€?
> 1. å®šä½åˆ°æŸæ—¥ï¼Œå¹¶æŠŠè®¿é—®ç™¾åº¦çš„æ—¥å¿—ä¸­çš„IPå–å‡ºæ¥ï¼Œé€ä¸ªå†™å…¥åˆ°å¤§æ–‡ä»¶ä¸­ã€‚æ³¨æ„IPæ˜?2ä½ï¼Œæœ€å¤šæœ‰2^32ä¸ªIPã€?
> 2. é‡‡ç”¨æ˜ å°„çš„æ–¹æ³•ï¼Œæ¯”å¦‚æ¨?000ï¼ŒæŠŠæ•´ä¸ªå¤§æ–‡ä»¶æ˜ å°„ä¸º1000ä¸ªå°æ–‡ä»¶
> 3. æ‰¾å‡ºæ¯ä¸ªå°æ–‡ä»¶å‡ºç°é¢‘ç‡æœ€å¤§çš„IPï¼ˆå¯ä»¥é‡‡ç”¨hash_mapè¿›è¡Œé¢‘ç‡ç»Ÿè®¡ï¼Œç„¶åå†æ‰¾å‡ºé¢‘ç‡æœ€å¤§çš„å‡ ä¸ªï¼‰åŠç›¸åº”çš„é¢‘ç‡ã€?
> 4. ç„¶åå†åœ¨è¿?000ä¸ªæœ€å¤§çš„IPä¸­ï¼Œæ‰¾å‡ºé‚£ä¸ªé¢‘ç‡æœ€å¤§çš„IPï¼Œå³ä¸ºæ‰€æ±‚ã€?
Â 
## 5. ä¸é‡å¤çš„æ•´æ•°
> **é¢˜ç›®**: åœ?.5äº¿ä¸ªæ•´æ•°ä¸­æ‰¾å‡ºä¸é‡å¤çš„æ•´æ•°ï¼Œå†…å­˜ä¸è¶³ä»¥å®¹çº³è¿™2.5äº¿ä¸ªæ•´æ•°ã€?
> 
> æ–¹æ¡ˆ1ï¼?  
> é‡‡ç”¨2-Bitmapï¼ˆæ¯ä¸ªæ•°åˆ†é…2bitï¼?0è¡¨ç¤ºä¸å­˜åœ¨ï¼Œ01è¡¨ç¤ºå‡ºç°ä¸€æ¬¡ï¼Œ10è¡¨ç¤ºå¤šæ¬¡ï¼?1æ— æ„ä¹‰ï¼‰è¿›è¡Œï¼Œå…±éœ€å†…å­˜2^32*2bit = 1Gå†…å­˜ï¼Œè¿˜å¯ä»¥æ¥å—ã€? 
> æ‰«æè¿?.5äº¿ä¸ªæ•´æ•°ï¼ŒæŸ¥çœ‹Bitmapä¸­ç›¸å¯¹åº”ä½ï¼Œå¦‚æœæ˜?0å?1ï¼?1å?0ï¼?0ä¿æŒä¸å˜ã€‚æ‰€æå®Œäº‹åï¼ŒæŸ¥çœ‹bitmapï¼ŒæŠŠå¯¹åº”ä½æ˜¯01çš„æ•´æ•°è¾“å‡ºå³å¯ã€?  
> 
> æ–¹æ¡ˆ2ï¼?  
> 
> é‡‡ç”¨ä¸Šé¢˜ç±»ä¼¼çš„æ–¹æ³•ï¼Œè¿›è¡Œåˆ’åˆ†å°æ–‡ä»¶çš„æ–¹æ³•ã€‚ç„¶ååœ¨å°æ–‡ä»¶ä¸­æ‰¾å‡ºä¸é‡å¤çš„æ•´æ•°ï¼Œå¹¶æ’åºã€‚ç„¶åå†è¿›è¡Œå½’å¹¶ï¼Œæ³¨æ„å»é™¤é‡å¤çš„å…ƒç´ ã€?
> 
## 6. Top K
> **é¢˜ç›®**: æµ·é‡æ•°æ®åˆ†å¸ƒåœ?00å°ç”µè„‘ä¸­ï¼Œæƒ³ä¸ªåŠæ³•é«˜æ ¡ç»Ÿè®¡å‡ºè¿™æ‰¹æ•°æ®çš„TOP10ã€?

> mapreduceè¿˜æ²¡æœ‰ä½¿ç”?æ˜¯ä¸æ˜¯åº”è¯¥ä½¿ç”¨ä¸‹mapreduce, æ‰¾key,å®švalue.

# å‚è€?
1. https://blog.csdn.net/u012289441/article/details/45192775
2. https://blog.csdn.net/v_july_v/article/details/6685962
